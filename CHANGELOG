# Changelog snaggle

## [v1.1.1] - Documentation

### Features

- Add example usage to readme

## [v1.1.0] - Add --copy option

### Features

- `--copy` will copy the fully contents of a directory (optionally recursively) and snaggle in-place

## [v1.0.0] - Faster, more robust

### Breaking changes

- stdout is prefixed with "link", "copy" or "skip"
- stdout lists absolute DESTINATION, even when relative path is given
- stdout will include SRC (RESOLVED_SRC) -> DESTINATION if SRC is, or is behind, a symlink
- ElfErr will not panic if .Error() is called on a nil error. Instead it will return `""` (nicer than stdlib errors which return partially formed strings)
- Default CLI behaviour is silent, --verbose must be specifically added to output details to stdout

### Features

- Default behaviour will now snaggle all files in parallel for 3x speed increase

### Fixes

- ErrElf does not panic if .Error() is called and no error is present

## [v0.3.1] - release automation

### Features

- improved changelog validation
- improved release automation

## [v0.3.0] - improved error handing

### Fixes

- parsable error returns from snaggle library
- well formatted error output from CLI

## [v0.2.0] - snaggle directories & snaggle in-place

### Features

- passing a directory to snaggle will snag all ELF binaries under that location
- adding --recursive (cli) / Recursive() (library) will also recurse subdirectories
- adding --in-place (cli) / InPlace() (library) will only snag dependencies

## [v0.1.4] - fix missing interpreter

### Fixes

- [#49](https://github.com/MusicalNinjaDad/snaggle/issues/49) "docker runtime built with snaggle fails: `exec /bin/tini: no such file or directory`"

## [v0.1.3] - fix error snaggling a dynamic library

### Fixes

- [#47](https://github.com/MusicalNinjaDad/snaggle/issues/47) "Unable to snag dynamic .so files"

## [v0.1.2] - fix error when target file exists

### Fixes

- [#43](https://github.com/MusicalNinjaDad/snaggle/issues/43) "Fails in multistage build when re-linking libc.so.6 (file exists)"

## [v0.1.1] - fix release machinery

### Fixes

- removed attestations from automated release process

## [v0.1.0] - initial CLI (Go)

### Features

- CLI `snaggle FILE DESTINATION` to snag a copy of FILE and all its dependencies to DESTINATION/bin & DESTINATION/lib64
  - Hardlinks will be created if possible.
  - A copy will be performed if hardlinking fails for one of the following reasons:
    - path & root are on different filesystems
    - the user does not have permission to hardlink (e.g.
      https://docs.kernel.org/admin-guide/sysctl/fs.html#protected-hardlinks)
  - Copies will retain the original filemode
  - Copies will attempt to retain the original ownership, although this will likely fail if running as non-root
- Library `snaggle` providing same functionality
- Library `elf` with parsing functionality

## [v0.0.1] - python script

### Features

- Original script using lddwrap
